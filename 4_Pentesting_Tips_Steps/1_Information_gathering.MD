# Information gathering



# 1. Identify UDID and system information 

Extract UDID with some of the next tools
-  option 1: [itunes](https://www.apple.com/co/itunes/)
-  option 2: macOS
-  option 3: [u3tool](http://www.3u.com/)


# 2. Get Important App paths and files

Some important paths on iOS App are:

```
App directory: /private/var/Containers/Bundle/Application/[UUID]
App Data: /private/var/mobile/Containers/Data/Application/[Data-UUID]
IPA file: /private/var/Containers/Bundle/Application/[UUID]/App.app
```

Search for interesting file names on the system associated with the app to test, ex:

``` 
find / -iname "*App_Name*" >> paths.txt //Replace App_Name for some app interesting/related string
```
Use SSH connection, Frida, and objection for remote shell browsing.

To search directly on iPhone make use of tweaks like "[Filza](https://www.ios-repo-updates.com/repository/tigisoftware/package/com.tigisoftware.filza/)" or "[Terminal](https://www.ios-repo-updates.com/repository/bigboss/package/com.ichitaso.mobileterminal/)".


# 3 Obtain the "App UUID"  and "App data UUID"

The UUID and App UUID, are unique identifiers for the app and its associated data.

After connecting iOS device try:

## Find UUID - Method 1

```
frida-ps -U //to get app PID, name and Identifier of App
Objection -g <app PID> explore  
env
```
or 
```
Objection --gadget <app Identifier> explore  
env
```

## Find UUID - Method 2
```
find /var/containers/Bundle/Application/ -iname "*<AppName>*"  
```


# 4 Obtaining IPA File

The IPA file is the Dev Code of the application to test. Usually, this file is delivered by the dev team to the pentest team.

Sometimes u need to capture the IPA from an app installed directly from the app store. The next procedures will help u on getting the IPA file, but works only on Jailbroken devices.

## 4.1 Frida iOS Dump

On macOS terminal make use of [https://github.com/AloneMonkey/frida-ios-dump](https://github.com/AloneMonkey/frida-ios-dump)

```
Git clone https://github.com/AloneMonkey/frida-ios-dump.git
cd frida-ios-dump
sudo pip3 install -r requirements.txt --upgrade
frida-ps â€“Ua                                    //Obtaine App Name
python3 dump.py "App Name".                     //Extract IPA file
```

## 4.2 Direct "SCP/SFTP" Extraction

Connect to the device with SSH and Compress App.app file for the selected App UUID, and save it as a ZIP file with IPA extension.

```
ssh <user>@<iphone IP>
cd /var/containers/Bundle/Application/[UUID]/
sudo zip -r /var/mobile/Downloads/<archive_name>.IPA App.app    //Defined your archive_name
exit
```

On macOS terminal download de generated IPA file

```
scp -P 22 <user>@<iphone IP>:<path to file> <destination path>
scp mobile@<iphone IP>:/var/mobile/Downloads/<archive_name>.tar.gz .
```

or use SFTP

```
sftp mobile@<iphone IP>
put <path file local machine> <destination path on remote machine>
get <path file local machine> <destination path on remote machine>
```

unzip the file to start reviewing it manually
```
unzip archive_name.IPA
```
or
```
tar -xvf archive_name.ipa
```